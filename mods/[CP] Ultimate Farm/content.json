{
    "Format": "2.3.0",
    "ConfigSchema":{
        "UseUltimateFarmCave":{
            "AllowValues":"true,false",
            "Default":"true"
        },
        "RemoveDogHouse":{
            "AllowValues":"true,false",
            "Default":"false"
        },
        "ReplaceVanillaFarm":{
            "AllowValues":"None, Standard, Forest, Riverland, Hilltop, Wilderness, Beach, FourCorners, Meadowlands",
            "AllowBlank":true,
            "Default":null

        }
    },
    "DynamicTokens":[
        {
            "Name":"recolour",
            "Value":"vanilla"
        },
        {
            "Name":"recolour",
            "Value":"earthy",
            "When":{"HasMod":"DaisyNiko.EarthyRecolour"}
        },
        {
            "Name":"file",
            "Value":"Farm",
            "When":{"ReplaceVanillaFarm":"Standard"}
        },
        {
            "Name":"file",
            "Value":"Farm_Foraging",
            "When":{"ReplaceVanillaFarm":"Forest"}
        },
        {
            "Name":"file",
            "Value":"Farm_Fishing",
            "When":{"ReplaceVanillaFarm":"Riverland"}
        },
        {
            "Name":"file",
            "Value":"Farm_Mining",
            "When":{"ReplaceVanillaFarm":"Hilltop"}
        },
        {
            "Name":"file",
            "Value":"Farm_Combat",
            "When":{"ReplaceVanillaFarm":"Wilderness"}
        },
        {
            "Name":"file",
            "Value":"Farm_Island",
            "When":{"ReplaceVanillaFarm":"Beach"}
        },
        {
            "Name":"file",
            "Value":"Farm_FourCorners",
            "When":{"ReplaceVanillaFarm":"FourCorners"}
        },
        {
            "Name":"file",
            "Value":"Farm_Ranching",
            "When":{"ReplaceVanillaFarm":"Meadowlands"}
        },
    ],
    "Changes": [
        //add new farm
        {
            //data
            "Action":"EditData",
            "Target":"Data/AdditionalFarms",
            "Entries":{
                "DaisyNiko.UltimateFarm":{
                    "ID":"DaisyNiko.UltimateFarm",
                    "TooltipStringPath":"Strings/UI:UltimateFarm",
                    "MapName":"UltimateFarm",
                    "IconTexture":"Mods/DaisyNiko.UltimateFarm/icon",
                    "WorldMapTexture":"Mods/DaisyNiko.UltimateFarm/map"
                }
            }
        },
        {
            //description
            "Action":"EditData",
            "Target":"Strings/UI",
            "Entries":{
                "UltimateFarm":"Ultimate Farm_A massive, immersive farm that includes fishing, foraging, mining, and more."
            }
        },
        {
            //map
            "Action":"Load",
            "Target":"Maps/UltimateFarm",
            "FromFile":"assets/UltimateFarm.tmx"
        },
        {
            //icon
            "Action":"Load",
            "Target":"Mods/DaisyNiko.UltimateFarm/icon",
            "FromFile":"assets/icon.png"
        },
        {
            //world map
            "Action":"Load",
            "Target":"Mods/DaisyNiko.UltimateFarm/map",
            "FromFile":"assets/maps {{recolour}}/map_{{season}}.png"
        },
        //replace vanilla map
        {
            "Action":"Load",
            "Target":"Maps/{{file}}",
            "FromFile":"assets/UltimateFarm.tmx",
            "When":{"HasValue:{{ReplaceVanillaFarm}}":"true"}
        },
        {
            "Action":"Load",
            "Target":"Maps/Farm_Greenhouse_Dirt, Maps/Farm_Greenhouse_Dirt_FourCorners",
            "FromFile":"assets/Greenhouse_Dirt.tmx",
            "When":{"HasValue:{{ReplaceVanillaFarm}}":"true"}
        },
        //strings
        {
            "Action": "EditData",
            "Target": "Strings/StringsFromMaps",
            "Entries": {
                "uf.0": "{{i18n: uf.0 |FarmName={{FarmName}}}}",
                "uf.1": "{{i18n: uf.1}}",
                "uf.2": "{{i18n: uf.2}}",
                "uf.3": "{{i18n: uf.3}}",
                "uf.4": "{{i18n: uf.4 |FarmName={{FarmName}}}}",
                "uf.5": "{{i18n: uf.5 |FarmName={{FarmName}}}}",
                "uf.6": "{{i18n: uf.6 |FarmName={{FarmName}}}}",
                "uf.7": "{{i18n: uf.7 |FarmName={{FarmName}}}}",
                "uf.8": "{{i18n: uf.8 |FarmName={{FarmName}}}}",
                "uf.9": "{{i18n: uf.9 |FarmName={{FarmName}}}}",
                "uf.10": "{{i18n: uf.10}}"
            }
        },
        //farm cave
        {
            "Action":"Load",
            "Target":"Maps/FarmCave",
            "FromFile":"assets/UltimateFarmCave.tmx",
            "When":{
                "UseUltimateFarmCave":"true",
                "FarmType":"DaisyNiko.UltimateFarm, {{ReplaceVanillaFarm}}"
            }
        },
        //remove cave entrance
        {
            "Action":"EditMap",
            "Target":"Maps/UltimateFarm, Maps/{{file}}",
            "FromFile":"assets/RemoveCaveEntrance.tmx",
            "ToArea":{"X":59,"Y":5,"Width":3,"Height":4},
            "PatchMode":"Replace",
            "When":{"UseUltimateFarmCave":"false"}
        },
        //add tiles and warps for second cave entrance
        {
            "Action":"EditMap",
            "Target":"Maps/UltimateFarm, Maps/{{file}}",
            "TextOperations":[
                {
                    "Operation":"Append",
                    "Target":["MapProperties","DayTiles"],
                    "Value":"Front 61 6 510",
                    "Delimiter":" "
                },
                {
                    "Operation":"Append",
                    "Target":["MapProperties","NightTiles"],
                    "Value":"Front 61 6 507",
                    "Delimiter":" "
                },
                {
                    "Operation":"Append",
                    "Target":["MapProperties","Light"],
                    "Value":"61 6 4",
                    "Delimiter":" "
                },
                {
                    "Operation":"Append",
                    "Target":["MapProperties","Warp"],
                    "Value":"34 6 FarmCave 6 13 60 6 FarmCave 37 13",
                    "Delimiter":" "
                }
            ],
            "When":{"UseUltimateFarmCave":"true"}
        },
        //remove dog house
        {
            "Action":"EditMap",
            "Target":"Maps/UltimateFarm, Maps/{{ReplaceVanillaFarm}}",
            "FromFile":"assets/RemoveDogHouse.tmx",
            "ToArea":{"X":50,"Y":3,"Width":5,"Height":3},
            "PatchMode":"Replace",
            "When":{"RemoveDogHouse":"true"}
        },
        //add new locations
        {
            "Action":"EditData",
            "Target":"Data/Locations",
            "Entries":{
                "UltimateFarm_QuarryCave":{
                    "DisplayName":"Quarry Cave",
                    "DefaultArrivalTile":{"X":7,"Y":13},
                    "CreateOnLoad":{"MapPath":"Maps/UltimateFarm_QuarryCave"}
                },
                "UltimateFarm_SpaCave":{
                    "DisplayName":"Spa Cave",
                    "DefaultArrivalTile":{"X":7,"Y":13},
                    "CreateOnLoad":{"MapPath":"Maps/UltimateFarm_SpaCave"}
                },
                "UltimateFarm_FarmForest":{
                    "DisplayName":"Farm Forest",
                    "DefaultArrivalTile":{"X":0,"Y":28},
                    "CreateOnLoad":{"MapPath":"Maps/UltimateFarm_FarmForest"},
                    "CanPlantHere":"true"
                },
                "UltimateFarm_FarmQuarry":{
                    "DisplayName":"Farm Quarry",
                    "DefaultArrivalTile":{"X":50,"Y":36},
                    "CreateOnLoad":{"MapPath":"Maps/UltimateFarm_FarmQuarry"}
                }
            }
        },
        //add map files
        {
            "Action":"Load",
            "Target":"Maps/UltimateFarm_QuarryCave, Maps/UltimateFarm_SpaCave, Maps/UltimateFarm_FarmForest, Maps/UltimateFarm_FarmQuarry",
            "FromFile":"assets/{{TargetWithoutPath}}.tmx"
        },
        //add minecart network
        {
            "Action":"EditData",
            "Target":"Data/Minecarts",
            "Entries":{
                "UltimateFarm":{
                    "Destinations":[
                        {
                            "Id":"Shrine",
                            "DisplayName":"Shrine",
                            "TargetLocation":"Farm",
                            "TargetTile":{"X":14,"Y":13},
                            "TargetDirection":"Up"
                        },
                        {
                            "Id":"TwinFalls",
                            "DisplayName":"Twin Falls",
                            "TargetLocation":"Farm",
                            "TargetTile":{"X":88,"Y":85},
                            "TargetDirection":"Up"
                        },
                        {
                            "Id":"RiverDock",
                            "DisplayName":"River Dock",
                            "TargetLocation":"Farm",
                            "TargetTile":{"X":46,"Y":59},
                            "TargetDirection":"Up"
                        },
                        {
                            "Id":"QuarryCave",
                            "DisplayName":"Farm Quarry",
                            "TargetLocation":"UltimateFarm_QuarryCave",
                            "TargetTile":{"X":8,"Y":6},
                            "TargetDirection":"Up"
                        },
                        {
                            "Id":"FarmForest",
                            "DisplayName":"Eastern Meadow",
                            "TargetLocation":"UltimateFarm_FarmForest",
                            "TargetTile":{"X":10,"Y":22},
                            "TargetDirection":"Up"
                        },
                    ]
                }
            }
        },
        //add cave minecarts
        {
            "Action":"EditData",
            "Target":"Data/Minecarts",
            "TargetField":["UltimateFarm","Destinations"],
            "Entries":{
                "UltimateFarmCave":{
                    "Id":"UltimateFarmCave",
                    "DisplayName":"{{FarmName}} Farm Cave",
                    "TargetLocation":"FarmCave",
                    "TargetTile":{"X":15,"Y":7},
                    "TargetDirection":"Up"
                }
            },
            "When":{
                "UseUltimateFarmCave":"true",
                "FarmType":"DaisyNiko.UltimateFarm"
            }
        },
        {
            "Action":"EditData",
            "Target":"Data/Minecarts",
            "TargetField":["Default","Destinations"],
            "Entries":{
                "UltimateFarmCave":{
                    "Id":"UltimateFarmCave",
                    "DisplayName":"{{FarmName}} Farm Cave",
                    "TargetLocation":"FarmCave",
                    "TargetTile":{"X":21,"Y":7},
                    "TargetDirection":"Up"
                }
            },
            "When":{
                "UseUltimateFarmCave":"true",
                "FarmType":"DaisyNiko.UltimateFarm"
            }
        }
    ]
}
